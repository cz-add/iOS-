>å¼€å‘ä¸­æˆ‘ä»¬ä¼šä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹çš„SDKï¼Œæœ‰çš„æ—¶å€™ä¹Ÿä¼šå°†æ•´ä¸ªç³»ç»Ÿçš„å…¬ç”¨çš„åŠŸèƒ½çš„æŠ½è±¡å‡ºæ¥æˆä¸ºFrameWorkï¼Œæˆ‘ä»¬åªéœ€è¦æš´éœ²å¯¹å¤–çš„æ¥å£ï¼Œä½¿ç”¨è€…åªéœ€è¦è°ƒç”¨æ¥å£ï¼Œå¯¹äºå†…éƒ¨å®ç°çš„è¿‡ç¨‹ä¸éœ€è¦ç»´æŠ¤ï¼Œå¯ä»¥ä»¥åº“çš„å½¢å¼è¿›è¡Œå°è£…ï¼Œåªæš´éœ²å‡ºå¤´æ–‡ä»¶ã€‚åº“ï¼ˆFrameWorkï¼‰æ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç¼–è¯‘çš„æ—¶å€™åªéœ€è¦ Link ä¸€ä¸‹ï¼Œæé«˜æµªè´¹ç¼–è¯‘æ—¶é—´ï¼Œåº“åˆ†ä¸ºé™æ€åº“å’ŒåŠ¨æ€åº“ã€‚

## åŸºç¡€çŸ¥è¯†

é™æ€åº“å³é™æ€é“¾æ¥åº“ï¼ˆWindows ä¸‹çš„ .libï¼ŒLinux å’Œ Mac ä¸‹çš„ .aï¼‰ã€‚ä¹‹æ‰€ä»¥å«åšé™æ€ï¼Œæ˜¯å› ä¸ºé™æ€åº“åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè¢«ç›´æ¥æ‹·è´ä¸€ä»½ï¼Œå¤åˆ¶åˆ°ç›®æ ‡ç¨‹åºé‡Œï¼Œè¿™æ®µä»£ç åœ¨ç›®æ ‡ç¨‹åºé‡Œå°±ä¸ä¼šå†æ”¹å˜äº†ã€‚é™æ€åº“çš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œç¼–è¯‘å®Œæˆä¹‹åï¼Œåº“æ–‡ä»¶å®é™…ä¸Šå°±æ²¡æœ‰ä½œç”¨äº†ã€‚ç›®æ ‡ç¨‹åºæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œç›´æ¥å°±å¯ä»¥è¿è¡Œã€‚å½“ç„¶å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä¼šä½¿ç”¨ç›®æ ‡ç¨‹åºçš„ä½“ç§¯å¢å¤§ã€‚

åŠ¨æ€åº“åŠ¨æ€åº“å³åŠ¨æ€é“¾æ¥åº“ï¼ˆWindows ä¸‹çš„ .dllï¼ŒLinux ä¸‹çš„ .soï¼ŒMac ä¸‹çš„ .dylibï¼‰ã€‚ä¸é™æ€åº“ç›¸åï¼ŒåŠ¨æ€åº“åœ¨ç¼–è¯‘æ—¶å¹¶ä¸ä¼šè¢«æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œç›®æ ‡ç¨‹åºä¸­åªä¼šå­˜å‚¨æŒ‡å‘åŠ¨æ€åº“çš„å¼•ç”¨ã€‚ç­‰åˆ°ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŠ¨æ€åº“æ‰ä¼šè¢«çœŸæ­£åŠ è½½è¿›æ¥ã€‚åŠ¨æ€åº“çš„ä¼˜ç‚¹æ˜¯ï¼Œä¸éœ€è¦æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œä¸ä¼šå½±å“ç›®æ ‡ç¨‹åºçš„ä½“ç§¯ï¼Œè€Œä¸”åŒä¸€ä»½åº“å¯ä»¥è¢«å¤šä¸ªç¨‹åºä½¿ç”¨ï¼ˆå› ä¸ºè¿™ä¸ªåŸå› ï¼ŒåŠ¨æ€åº“ä¹Ÿè¢«ç§°ä½œ**å…±äº«åº“**ï¼‰ã€‚åŒæ—¶ï¼Œç¼–è¯‘æ—¶æ‰è½½å…¥çš„ç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘ä»¬éšæ—¶å¯¹åº“è¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä»£ç ã€‚åŠ¨æ€åº“å¸¦æ¥çš„é—®é¢˜ä¸»è¦æ˜¯ï¼ŒåŠ¨æ€è½½å…¥ä¼šå¸¦æ¥ä¸€éƒ¨åˆ†æ€§èƒ½æŸå¤±ï¼Œä½¿ç”¨åŠ¨æ€åº“ä¹Ÿä¼šä½¿å¾—ç¨‹åºä¾èµ–äºå¤–éƒ¨ç¯å¢ƒã€‚å¦‚æœç¯å¢ƒç¼ºå°‘åŠ¨æ€åº“æˆ–è€…åº“çš„ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œï¼ˆLinux ä¸‹å–œé—»ä¹è§çš„ lib not found é”™è¯¯ï¼‰ã€‚

## åŠ¨æ€åº“

xCode6ä¹‹ååˆ¶ä½œåŠ¨æ€åº“ç›¸æ¯”ä¹‹å‰ç®€å•å¾ˆå¤šï¼ŒxCode7åŸºæœ¬ä¸Šæ²¿è¢­äº†xCode6çš„æ“ä½œï¼Œç»†èŠ‚æ–¹é¢æœ‰å·®åˆ«ã€‚åœ¨ iOS 8 ä¹‹å‰ï¼ŒiOS å¹³å°ä¸æ”¯æŒä½¿ç”¨åŠ¨æ€ Frameworkï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨çš„ Framework åªæœ‰è‹¹æœåŸºç¡€çš„ UIKit.Frameworkï¼ŒFoundation.Framework ç­‰ã€‚iOS 8/Xcode 6 æ¨å‡ºä¹‹åï¼ŒiOS å¹³å°æ·»åŠ äº†åŠ¨æ€åº“çš„æ”¯æŒï¼ŒåŒæ—¶ Xcode 6 ä¹ŸåŸç”Ÿè‡ªå¸¦äº† Framework æ”¯æŒï¼ˆåŠ¨æ€å’Œé™æ€éƒ½å¯ä»¥ï¼‰ï¼ŒiOS8å¤šäº†Â Extension ï¼ŒExtension å’Œ App æ˜¯ä¸¤ä¸ªåˆ†å¼€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŒæ—¶éœ€è¦å…±äº«ä»£ç ï¼Œè¿™ç§æƒ…å†µä¸‹åŠ¨æ€åº“çš„æ”¯æŒå°±æ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚ä½†æ˜¯è¿™ç§åŠ¨æ€ Framework å’Œç³»ç»Ÿçš„ UIKit.Framework è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«ã€‚ç³»ç»Ÿçš„ Framework ä¸éœ€è¦æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è‡ªå·±åšå‡ºæ¥çš„ Framework å“ªæ€•æ˜¯åŠ¨æ€çš„ï¼Œæœ€åä¹Ÿè¿˜æ˜¯è¦æ‹·è´åˆ° App ä¸­ï¼ˆApp å’Œ Extension çš„ Bundle æ˜¯å…±äº«çš„ï¼‰ï¼Œå› æ­¤è‹¹æœåˆæŠŠè¿™ç§ Framework ç§°ä¸ºEmbedded FrameWork.

ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œæœ‰ä¸€ä¸ªå­¦ä¹ çš„æ°›å›´è·Ÿä¸€ä¸ªäº¤æµåœˆå­ç‰¹åˆ«é‡è¦ï¼Œè¿™æœ‰ä¸ªiOSäº¤æµç¾¤ï¼š[642363427](https://links.jianshu.com/go?to=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Flinks.jianshu.com%2Fgo%253Fto%253Dhttps%25253A%25252F%25252Flink.zhihu.com%25252F%25253Ftarget%25253Dhttps%2525253A%25252F%25252Flinks.jianshu.com%25252Fgo%2525253Fto%2525253Dhttps%252525253A%252525252F%252525252Fjq.qq.com%252525252F%252525253F_wv%252525253D1027%2525252526k%252525253DbESXgU0E)ï¼Œä¸ç®¡ä½ æ˜¯å°ç™½è¿˜æ˜¯å¤§ç‰›æ¬¢è¿å…¥é©» ï¼Œåˆ†äº«BAT,é˜¿é‡Œé¢è¯•é¢˜ã€é¢è¯•ç»éªŒï¼Œè®¨è®ºæŠ€æœ¯ï¼ŒiOSå¼€å‘è€…ä¸€èµ·äº¤æµå­¦ä¹ æˆé•¿ï¼


1.æ–°å»ºåŠ¨æ€åº“Fileâ†’Newâ†’Targetâ†’Cocoa Touch FrameWork:

![](https://upload-images.jianshu.io/upload_images/24396273-31abe872d6d01882.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

2.é¡¹ç›®åç§°DynamicLibrary,åŒæ—¶æˆ‘ä»¬æ–°å»ºä¸¤ä¸ªæµ‹è¯•æ–‡ä»¶FEUIImageï¼ŒTestImage:

![](https://upload-images.jianshu.io/upload_images/24396273-82a1aab36e99aa7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

3.åœ¨Dynamic.hä¸­å¯¼å…¥å¤´æ–‡ä»¶:
```
#import <UIKit/UIKit.h>
 
//! Project version number for DynamicLibrary.
FOUNDATION_EXPORT double DynamicLibraryVersionNumber;
 
//! Project version string for DynamicLibrary.
FOUNDATION_EXPORT const unsigned char DynamicLibraryVersionString[];
 
// In this header, you should import all the public headers of your framework using statements like #import <DynamicLibrary/PublicHeader.h>
#import <DynamicLibrary/FEUIImage.h>

```

4.å°†FEUIImageå’ŒTestImageè®¾ç½®ä¸ºPublicä¾›å¤–éƒ¨è®¿é—®:

![image](https://upload-images.jianshu.io/upload_images/24396273-0fd9df292191c900.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

5.cmb+bç¼–è¯‘é¡¹ç›®ï¼Œç¼–è¾‘æˆåŠŸä¹‹åå°†é¡¹ç›®ç§»åŠ¨åˆ°é¡¹ç›®ä¸­è¿›è¡Œæµ‹è¯•:

![image](https://upload-images.jianshu.io/upload_images/24396273-6a826cdc8fef6c50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

6.é€šè¿‡FEDeviceé¡¹ç›®æ‰¾åˆ°ç¼–è¯‘ä¹‹åçš„DynamicLibrary.framworkæ–‡ä»¶

![image](https://upload-images.jianshu.io/upload_images/24396273-feb4d0563c30abef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

![image](https://upload-images.jianshu.io/upload_images/24396273-fc108175bb944fde.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## é€šç”¨åŠ¨æ€åº“

æˆ‘ä»¬å°†ä¸Šé¢çš„DynamicLibrary.frameworkç§»åŠ¨çš„å…¶ä»–é¡¹ç›®ä¸­æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™ä¼šå‡ºé”™ï¼ŒÂ é”™è¯¯ä¿¡æ¯å¦‚ä¸‹:
```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_FEUIImage", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
```
é”™è¯¯ä¿¡æ¯è·ŸåŠ¨æ€çš„æŒ‡ä»¤é›†å’Œç›®æ ‡é¡¹ç›®çš„æŒ‡ä»¤é›†ç‰ˆæœ¬æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„äº†è§£ä¸‹Achitectureså’Œè®¾å¤‡ä¹‹é—´çš„å…³ç³»ï¼ŒiPhoneä¸€ç›´ä»¥æ¥éƒ½æ˜¯Armå¤„ç†å™¨ï¼ŒArmæ˜¯å¤„ç†å™¨æ˜¯ç§»åŠ¨è®¾å¤‡ä¸Šå ç”¨ç‡æœ€å¤§çš„å¤„ç†å™¨ã€‚ åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„æ˜¯x86æŒ‡ä»¤é›†ï¼Œåªæœ‰åœ¨çœŸæœºä¸Šæ‰ä¼šæ‰§è¡ŒarmæŒ‡ä»¤é›†ï¼Œæ¯ä¸ªæŒ‡ä»¤é›†å¯¹åº”ä¸åŒçš„æœºå‹è®¾ç½®:

éƒ½æ˜¯armå¤„ç†å™¨çš„æŒ‡ä»¤é›†ã€‚é€šå¸¸æŒ‡ä»¤æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚åœ¨æ¨¡æ‹Ÿå™¨è¿è¡Œæ—¶ï¼ŒiOSæ¨¡æ‹Ÿå™¨è¿è¡Œçš„æ˜¯x86æŒ‡ä»¤é›†ã€‚åªæœ‰åœ¨çœŸæœºä¸Šï¼Œæ‰ä¼šå¯¹æ‰§è¡ŒarmæŒ‡ä»¤é›†ã€‚

armv6ï¼šiPhoneï¼ŒiPhone 2G/3Gï¼ŒiPod 1G/2Gï¼ŒxCode4.5å·²ç»ä¸æ”¯æŒarmv6æŒ‡ä»¤é›†ï¼› 

armv7 ï¼šiPhone 3GSï¼ŒiPhone4ï¼ŒiPhone 4sï¼ŒiPadï¼ŒiPad2ï¼ŒiPad3(The New iPad)ï¼ŒiPad miniï¼ŒiPod Touch 3Gï¼ŒiPod Touch4ï¼Œç”±äºiPhone4sçš„å æœ‰ç‡ï¼Œç›®å‰æ˜¯æŒ‡ä»¤é›†çš„æœ€ä½ç‰ˆæœ¬ï¼›

armv7sï¼šiPhone5ï¼Œ iPhone5Cï¼ŒiPad4å’ŒiPod5ï¼›

arm64ï¼šiPhone5sï¼ŒiPhone6ï¼ŒiPhone6 Plusï¼ŒiPad Airï¼ŒiPad mini2(iPad mini with Retina Display)ï¼ŒiPhone6sï¼ŒiPhone6s Plus

æˆ‘ä»¬å¯ä»¥é€šè¿‡lipoå‘½ä»¤æŸ¥çœ‹å‘ç°i386æ˜¯macç‰ˆæŒ‡ä»¤é›†:
```
lipo -info DynamicLibrary.framework/DynamicLibrary
Non-fat file: DynamicLibrary.framework/DynamicLibrary is architecture: i386
```
1.å¦‚æœç”¨çœŸæœºè°ƒè¯•çš„è¯ï¼ŒåŒæ ·ä¼šå‘ç”Ÿç¨‹åºé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦å°†åŒæ ·çš„ä»£ç åŒæ—¶æ”¯æŒæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºï¼Œä¸¤ä»½åº“èšåˆä¸€ä¸‹,å›åˆ°DynamicLibrary.frameWorké¡¹ç›®,é€šè¿‡Fileâ†’Newâ†’Targetâ†’Otherâ†’Aggregateï¼š

![image](https://upload-images.jianshu.io/upload_images/24396273-870562e0174ad121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

2.æ‰§è¡Œç¼–è¯‘è„šæœ¬åœ°å€ï¼Œå…ˆé€‰ä¸­DynamicLibrary-Universalï¼Œæ·»åŠ è„šæœ¬åœ°å€:
```
/${PROJECT_DIR}/DynamicLibrary/ios-framework-universal-script.sh
```
![](https://upload-images.jianshu.io/upload_images/24396273-bdd7ba43d654fcf7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

3.è®¾ç½®è„šæœ¬å†…å®¹ï¼ŒåŒæ—¶è®¾ç½®DynamicLibrary-Universalçš„ä¾èµ–é¡¹(Target Dependencies)ä¸ºDynamicLibrary:
```
#!/bin/sh
 
#  ios-build-framework-script.sh
#  DynamicLibrary åšå®¢å›­-FlyElephant
#  åšå®¢å›­:http://www.cnblogs.com/xiaofeixiang/
#  Created by keso on 16/1/17.
#  Copyright Â© 2016å¹´ FlyElephant. All rights reserved.
set -e
set +u
### Avoid recursively calling this script.
if [[ $UF_MASTER_SCRIPT_RUNNING ]]
then
exit 0
fi
set -u
export UF_MASTER_SCRIPT_RUNNING=1
### Constants.
UF_TARGET_NAME=${PROJECT_NAME}
FRAMEWORK_VERSION="A"
UNIVERSAL_OUTPUTFOLDER=${BUILD_DIR}/${CONFIGURATION}-universal
IPHONE_DEVICE_BUILD_DIR=${BUILD_DIR}/${CONFIGURATION}-iphoneos
IPHONE_SIMULATOR_BUILD_DIR=${BUILD_DIR}/${CONFIGURATION}-iphonesimulator
### Functions
## List files in the specified directory, storing to the specified array.
#
# @param $1 The path to list
# @param $2 The name of the array to fill
#
##
list_files ()
{
filelist=$(ls "$1")
while read line
do
eval "$2[\${#$2[*]}]=\"\$line\""
done <<< "$filelist"
}
### Take build target.
if [[ "$SDK_NAME" =~ ([A-Za-z]+) ]]
then
SF_SDK_PLATFORM=${BASH_REMATCH[1]} # "iphoneos" or "iphonesimulator".
else
echo "Could not find platform name from SDK_NAME: $SDK_NAME"
exit 1
fi
### Build simulator platform. (i386, x86_64)
echo "========== Build Simulator Platform =========="
echo "===== Build Simulator Platform: i386 ====="
xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk iphonesimulator BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}" CONFIGURATION_BUILD_DIR="${IPHONE_SIMULATOR_BUILD_DIR}/i386" SYMROOT="${SYMROOT}" ARCHS='i386' VALID_ARCHS='i386' $ACTION
echo "===== Build Simulator Platform: x86_64 ====="
xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk iphonesimulator BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}" CONFIGURATION_BUILD_DIR="${IPHONE_SIMULATOR_BUILD_DIR}/x86_64" SYMROOT="${SYMROOT}" ARCHS='x86_64' VALID_ARCHS='x86_64' $ACTION
### Build device platform. (armv7, arm64)
echo "========== Build Device Platform =========="
echo "===== Build Device Platform: armv7 ====="
xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk iphoneos BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}"  CONFIGURATION_BUILD_DIR="${IPHONE_DEVICE_BUILD_DIR}/armv7" SYMROOT="${SYMROOT}" ARCHS='armv7 armv7s' VALID_ARCHS='armv7 armv7s' $ACTION
echo "===== Build Device Platform: arm64 ====="
xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk iphoneos BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}" CONFIGURATION_BUILD_DIR="${IPHONE_DEVICE_BUILD_DIR}/arm64" SYMROOT="${SYMROOT}" ARCHS='arm64' VALID_ARCHS='arm64' $ACTION
### Build device platform. (arm64, armv7)
echo "========== Build Universal Platform =========="
## Copy the framework structure to the universal folder (clean it first).
rm -rf "${UNIVERSAL_OUTPUTFOLDER}"
mkdir -p "${UNIVERSAL_OUTPUTFOLDER}"
## Copy the last product files of xcodebuild command.
cp -R "${IPHONE_DEVICE_BUILD_DIR}/arm64/${PROJECT_NAME}.framework" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework"
### Smash them together to combine all architectures.
lipo -create  "${BUILD_DIR}/${CONFIGURATION}-iphonesimulator/i386/${PROJECT_NAME}.framework/${PROJECT_NAME}" "${BUILD_DIR}/${CONFIGURATION}-iphonesimulator/x86_64/${PROJECT_NAME}.framework/${PROJECT_NAME}" "${BUILD_DIR}/${CONFIGURATION}-iphoneos/armv7/${PROJECT_NAME}.framework/${PROJECT_NAME}" "${BUILD_DIR}/${CONFIGURATION}-iphoneos/arm64/${PROJECT_NAME}.framework/${PROJECT_NAME}" -output "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/${PROJECT_NAME}"
### Create standard structure for framework.
#
# If we don't have "Info.plist -> Versions/Current/Resources/Info.plist", we may get error when use this framework.
#
# MyFramework.framework
# |-- MyFramework -> Versions/Current/MyFramework
# |-- Headers -> Versions/Current/Headers
# |-- Resources -> Versions/Current/Resources
# |-- Info.plist -> Versions/Current/Resources/Info.plist
# `-- Versions
#     |-- A
#     |   |-- MyFramework
#     |   |-- Headers
#     |   |   `-- MyFramework.h
#     |   `-- Resources
#     |       |-- Info.plist
#     |       |-- MyViewController.nib
#     |       `-- en.lproj
#     |           `-- InfoPlist.strings
#     `-- Current -> A
#
echo "========== Create Standard Structure =========="
mkdir -p "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Versions/${FRAMEWORK_VERSION}/"
mv "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/${PROJECT_NAME}" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Versions/${FRAMEWORK_VERSION}/"
mv "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Headers" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Versions/${FRAMEWORK_VERSION}/"
mkdir -p "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Resources"
declare -a UF_FILE_LIST
list_files "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/" UF_FILE_LIST
for file_name in "${UF_FILE_LIST[@]}"
do
if [[ "${file_name}" == "Info.plist" ]] || [[ "${file_name}" =~ .*\.lproj$ ]]
then
mv "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/${file_name}" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Resources/"
fi
done
mv "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Resources" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Versions/${FRAMEWORK_VERSION}/"
ln -sfh "Versions/Current/Resources/Info.plist" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Info.plist"
ln -sfh "${FRAMEWORK_VERSION}" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Versions/Current"
ln -sfh "Versions/Current/${PROJECT_NAME}" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/${PROJECT_NAME}"
ln -sfh "Versions/Current/Headers" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Headers"
ln -sfh "Versions/Current/Resources" "${UNIVERSAL_OUTPUTFOLDER}/${PROJECT_NAME}.framework/Resources"
### Open the universal folder.
open "${UNIVERSAL_OUTPUTFOLDER}"
```
ä¸Šé¢çš„è„šæœ¬å†…å®¹åœ¨è„šæœ¬æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¾æ¬¡ç¼–è¯‘å‡ºæ”¯æŒ i386ã€x86_64ã€arm64ã€armv7ã€armv7s çš„åŒ…ï¼Œç„¶åæŠŠå„ä¸ªåŒ…ä¸­çš„åº“æ–‡ä»¶é€šè¿‡ lipo å·¥å…·åˆå¹¶ä¸ºä¸€ä¸ªæ”¯æŒå„å¹³å°çš„é€šç”¨åº“æ–‡ä»¶ï¼Œå†åŸºäºæœ€åä¸€ä¸ª xcodebuild å‘½ä»¤æ‰“å‡ºçš„åŒ…çš„ç»“æ„(arm64/DynamicLibrary.framework)å’Œè¿™ä¸ªé€šç”¨åº“æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªæ”¯æŒå„ä¸ªå¹³å°çš„é€šç”¨ Framworkï¼›æœ€åç¼–è¯‘ä¹‹åä¼šå¼¹å‡ºframeworkçš„ä½ç½®:

![](https://upload-images.jianshu.io/upload_images/24396273-f3caf6a107821af4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

4.è®¾ç½®äº†é€šç”¨åº“ä¹‹åï¼Œè¿˜éœ€è¦åœ¨Genralä¸‹Embedded Binariesæ·»åŠ ä¸€ä¸‹åŠ¨æ€åº“:

![](https://upload-images.jianshu.io/upload_images/24396273-13975db3c3a306b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## é™æ€åº“

åŠ¨æ€ Framework æ˜¯å¼€å‘ä¸­ä¼˜å…ˆè€ƒè™‘çš„ä»£ç æ‰“åŒ…æ–¹å¼ï¼Œä½†æ˜¯ä¸ºäº†å…¼å®¹ä¸€äº›ä½ç‰ˆæœ¬ç³»ç»Ÿå¯¹åŠ¨æ€åº“çš„é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰“åŒ…é™æ€åº“æ¥ä½¿ç”¨ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œåœ¨åŸæœ‰çš„DynamicLibraryé¡¹ç›®Â Build Settings ä¸‹è®¾ç½® Mach-O Type å€¼ä¸º Static Libraryï¼Œå¯ä»¥ç¼–è¯‘å‡ºé™æ€åº“ã€‚

![](https://upload-images.jianshu.io/upload_images/24396273-d48cd8e390dc795f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 

è®¾ç½®ä¸ºé™æ€åº“ä¹‹ååŠ¨æ€åº“çš„æœ€åä¸€æ­¥Embedded Binarieså°±ä¸ç”¨å†æ·»åŠ äº†ï¼Œå¦‚æœå·²ç»æ·»åŠ å»ºè®®åˆ é™¤~
# æ¨èğŸ‘‡ï¼š

å¦‚æœä½ æƒ³ä¸€èµ·è¿›é˜¶ï¼Œä¸å¦¨æ·»åŠ ä¸€ä¸‹äº¤æµç¾¤[642363427](https://links.jianshu.com/go?to=https%3A%2F%2Fjq.qq.com%2F%3F_wv%3D1027%26k%3DNZv0AWXz)
